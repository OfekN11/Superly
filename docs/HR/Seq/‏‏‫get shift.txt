title Get Shift
activate sc1-ShiftController

sc1-ShiftController ->sdm1-ShiftDataMapper :1: get(date,shiftType)
activate sdm1-ShiftDataMapper




sdm1-ShiftDataMapper -> stDataMapper-ShiftTypeDataMapper:1.1: get(date)
activate stDataMapper-ShiftTypeDataMapper
stDataMapper-ShiftTypeDataMapper->stDataMapper-ShiftTypeDataMapper:1.1.1 get from the IdentityMap
activate stDataMapper-ShiftTypeDataMapper
space -0.5
deactivate stDataMapper-ShiftTypeDataMapper
alt shift existed in the identityMap
participant s1-Shift
stDataMapper-ShiftTypeDataMapper -->sdm1-ShiftDataMapper:1.1.2A: e1-Employee
deactivate stDataMapper-ShiftTypeDataMapper
sdm1-ShiftDataMapper-->sc1-ShiftController:1.2A: e1-Employee
else 
activate stDataMapper-ShiftTypeDataMapper
stDataMapper-ShiftTypeDataMapper->stDataMapper-ShiftTypeDataMapper:1.1.2B select(date)
activate stDataMapper-ShiftTypeDataMapper
space -05
deactivate stDataMapper-ShiftTypeDataMapper
space 
alt shift exist in the database
stDataMapper-ShiftTypeDataMapper ->*s2-Shift:1.2.3BA <<create>>
stDataMapper-ShiftTypeDataMapper -->sdm1-ShiftDataMapper:1.2.4 BA: e2-Employee
deactivate stDataMapper-ShiftTypeDataMapper
sdm1-ShiftDataMapper-->sc1-ShiftController:1.2BA: e2-Employee
deactivate sdm1-ShiftDataMapper

else 
activate sdm1-ShiftDataMapper
activate stDataMapper-ShiftTypeDataMapper
stDataMapper-ShiftTypeDataMapper-->sdm1-ShiftDataMapper:1.1.3 BB null
deactivate stDataMapper-ShiftTypeDataMapper
sdm1-ShiftDataMapper -->sc1-ShiftController: 1.2BB: null
deactivate sdm1-ShiftDataMapper

end 

end 


